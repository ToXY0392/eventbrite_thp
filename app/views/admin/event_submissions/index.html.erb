<h1 class="h2 mb-4"><%= t("app.admin.event_submissions.index.title") %></h1>

<% if @events.any? %>
  <div class="table-responsive">
    <table class="table table-dark table-striped">
      <thead>
        <tr>
          <th>#</th>
          <th>Titre</th>
          <th>Organisateur</th>
          <th>Date</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <% @events.each do |event| %>
          <tr>
            <td><%= event.id %></td>
            <td><%= event.title %></td>
            <td><%= event.admin.email %></td>
            <td><%= l(event.start_date, format: :long) rescue event.start_date %></td>
            <td>
              <%= link_to "Voir", admin_event_submission_path(event), class: "btn btn-sm btn-outline-primary" %>
              <%= button_to t("app.admin.event_submissions.index.validate"),
                            admin_event_submission_path(event),
                            method: :patch,
                            params: { validated: true },
                            form: { data: { turbo_confirm: "Valider cet événement ?" } },
                            class: "btn btn-sm btn-success" %>
              <%= button_to t("app.admin.event_submissions.index.reject"),
                            admin_event_submission_path(event),
                            method: :patch,
                            params: { validated: false },
                            form: { data: { turbo_confirm: "Refuser cet événement ?" } },
                            class: "btn btn-sm btn-danger" %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
<% else %>
  <p class="text-white-50"><%= t("app.admin.event_submissions.index.empty") %></p>
<% end %>

<p class="mt-3">
  <%= link_to "← Tableau de bord", admin_root_path, class: "btn btn-outline-secondary" %>
</p>
