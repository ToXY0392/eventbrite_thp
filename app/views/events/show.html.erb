<div class="row">
  <div class="col-md-8 mb-4">
    <h1 class="h3 mb-3"><%= @event.title %></h1>

    <p class="mb-3">
      <%= simple_format(@event.description) %>
    </p>

    <ul class="list-unstyled mb-3">
      <li>
        <strong><%= t("app.events.labels.start_date") %> :</strong>
        <%= l(@event.start_date, format: :long) rescue @event.start_date %>
      </li>
      <li>
        <strong><%= t("app.events.labels.duration") %> :</strong>
        <%= @event.duration %> <%= t("app.events.show.duration_minutes") %>
      </li>
      <li>
        <strong><%= t("app.events.labels.end_date") %> :</strong>
        <%= l(@event.end_date, format: :long) rescue @event.end_date.strftime("%Y-%m-%d %H:%M") %>
      </li>
      <li>
        <strong><%= t("app.events.labels.location") %> :</strong>
        <%= @event.location %>
      </li>
      <li>
        <strong><%= t("app.events.labels.price") %> :</strong>
        <%= @event.price %> â‚¬
      </li>
      <li>
        <strong><%= t("app.events.labels.attendees") %> :</strong>
        <%= @attendees_count %>
      </li>
      <li>
        <strong><%= t("app.events.labels.admin") %> :</strong>
        <%= @event.admin&.email || t("app.events.show.unknown") %>
      </li>
    </ul>

    <% if user_signed_in? %>
      <% if current_user == @event.admin %>
        <div class="d-flex gap-2 mb-3">
          <%= link_to t("app.events.show.edit_btn"), edit_event_path(@event), class: "btn btn-outline-primary" %>
          <%= button_to t("app.events.show.delete_btn"),
                        event_path(@event),
                        method: :delete,
                        data: { turbo_confirm: t("app.events.show.delete_confirm") },
                        class: "btn btn-outline-danger" %>
        </div>
      <% elsif current_user.attended_events.include?(@event) %>
        <p class="text-success mb-3"><%= t("app.events.show.already_joined") %></p>
      <% else %>
        <%= button_to t("app.events.show.join_btn"),
                      event_attendances_path(@event),
                      method: :post,
                      class: "btn btn-primary mb-3" %>
      <% end %>
    <% else %>
      <p class="mb-3">
        <%= link_to t("app.nav.sign_in"), new_user_session_path %> <%= t("app.events.show.sign_in_to_join") %>
      </p>
    <% end %>

    <%= link_to t("app.events.show.back"), root_path, class: "btn btn-outline-secondary" %>
  </div>
</div>